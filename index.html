<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedstadon</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#3498db"/>
    <script src="https://cdn.jsdelivr.net/npm/showdown@2.1.0/dist/showdown.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
</head>
<body>

    <div id="pull-to-refresh-indicator">Pull to refresh</div>

    <div id="app-view">
        <nav class="top-nav">
            <div class="nav-group">
                <div class="dropdown" id="feeds-dropdown">
                    <button id="feeds-btn">
                        <span class="logo">Feedstadon</span>
                    </button>
                    <div class="dropdown-content">
                        <a href="#" data-timeline="home">
                            <div class="logo-container">
                                <span>Home</span>
                            </div>
                        </a>
                        <a href="#" id="lemmy-main-link">
                             <div class="logo-container">
                                <span id="lemmy-logo-container"></span>
                                <span>Lemmy</span>
                            </div>
                        </a>
                        <a href="#" id="mastodon-main-link">
                             <div class="logo-container">
                                <span id="mastodon-logo-container"></span>
                                <span>Mastodon</span>
                            </div>
                        </a>
                    </div>
                </div>

            </div>
            <div class="nav-group">
                <button id="refresh-btn" class="nav-button"></button>
                <div id="refresh-spinner" class="nav-button"></div>
                <button id="discover-btn" class="nav-button">üîç</button>
                <button id="notifications-btn" class="nav-button"></button>
                <div class="dropdown" id="user-dropdown">
                    <button id="user-btn" class="nav-button">üë§</button>
                    <div class="dropdown-content">
                        <a href="#" id="new-post-link">New Post</a>
                        <a href="#" id="profile-link">Profile</a>
                        <a href="#" id="settings-link">Settings</a>
                        <a href="#" id="help-link">Help & About</a>
                    </div>
                </div>
            </div>
        </nav>

        <nav id="timeline-sub-nav" style="display: none;"></nav>

        <main id="main-content">
            <div id="timeline" class="timeline-container"></div>
            <div id="notifications-view" style="display: none;"></div>
            <div id="discover-view" style="display: none;"></div>
            <div id="screenshot-view" style="display: none;" class="single-page-view"></div>
            <div id="profile-page-view" style="display: none;"></div>
             <div id="edit-profile-view" style="display: none;" class="single-page-view"></div>
            <div id="search-results-view" style="display: none;"></div>
            <div id="settings-view" style="display: none;"></div>
            <div id="status-detail-view" style="display: none;" class="single-page-view"></div>
            <div id="lemmy-post-view" style="display: none;" class="single-page-view"></div>
             <div id="lemmy-community-view" style="display: none;" class="single-page-view"></div>
             <div id="merged-post-view" style="display: none;" class="single-page-view"></div>
            <div id="scroll-loader">Loading more...</div>
        </main>
    </div>

    <div id="context-menu"></div>
    <div id="toast-notification"></div>

    <div id="image-modal" class="modal">
        <span class="modal-close">&times;</span>
        <img class="modal-content" id="modal-image">
    </div>
    
    <div id="compose-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close" id="close-compose-btn">&times;</span>
            <h3>New Post</h3>
            <div id="compose-container"></div>
        </div>
    </div>
    
    <div id="help-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close" id="close-help-btn">&times;</span>
            <h2>About Feedstadon</h2>
            <p>Feedstadon is a simple client for Mastodon and Lemmy.</p>
            <h3>Features</h3>
            <ul>
                <li>View timelines from both Mastodon and Lemmy.</li>
                <li>Post to Mastodon.</li>
                <li>Interact with posts (reply, reblog, favorite, etc.).</li>
            </ul>
        </div>
    </div>

    <script src="app.js" type="module"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js')
            .then(function(registration) {
                console.log('ServiceWorker registration successful with scope: ', registration.scope);
            })
            .catch(function(err) {
                console.log('ServiceWorker registration failed: ', err);
            });
        }
    </script>
</body>
</html>
